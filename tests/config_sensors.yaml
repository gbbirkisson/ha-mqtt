---
automation:
- action:
    data_template:
      entity_id: input_number.5
      value: '{{ trigger.payload }}'
    service: input_number.set_value
  alias: '5_1'
  trigger:
    platform: mqtt
    topic: homeassistant/sensor/5/state
- action:
    data_template:
      payload: '{{ states(''input_number.5'') | int }}'
      topic: homeassistant/sensor/5/cmd
    service: mqtt.publish
  alias: '5_2'
  trigger:
    entity_id: input_number.5
    platform: state
- action:
    data_template:
      entity_id: input_number.6
      value: '{{ trigger.payload }}'
    service: input_number.set_value
  alias: '6_1'
  trigger:
    platform: mqtt
    topic: homeassistant/sensor/6/state
- action:
    data_template:
      payload: '{{ states(''input_number.6'') | int }}'
      topic: homeassistant/sensor/6/cmd
    service: mqtt.publish
  alias: '6_2'
  trigger:
    entity_id: input_number.6
    platform: state
- action:
    data_template:
      entity_id: input_number.7
      value: '{{ trigger.payload }}'
    service: input_number.set_value
  alias: '7_1'
  trigger:
    platform: mqtt
    topic: /my/topic
- action:
    data_template:
      payload: '{{ states(''input_number.7'') | int }}'
      topic: homeassistant/sensor/7/cmd
    service: mqtt.publish
  alias: '7_2'
  trigger:
    entity_id: input_number.7
    platform: state
- action:
    data_template:
      entity_id: input_number.8
      value: '{{ trigger.payload }}'
    service: input_number.set_value
  alias: '8_1'
  trigger:
    platform: mqtt
    topic: /my/topic
- action:
    data_template:
      payload: '{{ states(''input_number.8'') | int }}'
      topic: homeassistant/sensor/8/cmd
    service: mqtt.publish
  alias: '8_2'
  trigger:
    entity_id: input_number.8
    platform: state
climate: []
input_number:
  '5':
    icon: null
    initial: 7.5
    max: 10
    min: 0
    name: test5
    step: 0.5
    unit_of_measurement: °C
  '6':
    icon: null
    initial: 7.5
    max: 10
    min: 0
    name: test6
    step: 0.5
    unit_of_measurement: °C
  '7':
    icon: null
    initial: 7.5
    max: 10
    min: 0
    name: test7
    step: 0.5
    unit_of_measurement: °C
  '8':
    icon: null
    initial: 7.5
    max: 10
    min: 0
    name: test8
    step: 0.5
    unit_of_measurement: °C
sensor:
- name: test1
  platform: mqtt
  state_topic: homeassistant/sensor/1/state
  unit_of_measurement: °C
- availability_topic: homeassistant/sensor/2/available
  name: test2
  payload_available: online
  payload_not_available: offline
  platform: mqtt
  state_topic: homeassistant/sensor/2/state
  unit_of_measurement: °C
- name: test3
  platform: mqtt
  state_topic: /my/topic
  unit_of_measurement: °C
  value_template: '{{ value_json.3 }}'
- availability_topic: homeassistant/sensor/4/available
  name: test4
  payload_available: online
  payload_not_available: offline
  platform: mqtt
  state_topic: /my/topic
  unit_of_measurement: °C
  value_template: '{{ value_json.4 }}'
- name: test5
  platform: mqtt
  state_topic: homeassistant/sensor/5/state
  unit_of_measurement: °C
- availability_topic: homeassistant/sensor/6/available
  name: test6
  payload_available: online
  payload_not_available: offline
  platform: mqtt
  state_topic: homeassistant/sensor/6/state
  unit_of_measurement: °C
- name: test7
  platform: mqtt
  state_topic: /my/topic
  unit_of_measurement: °C
  value_template: '{{ value_json.7 }}'
- availability_topic: homeassistant/sensor/8/available
  name: test8
  payload_available: online
  payload_not_available: offline
  platform: mqtt
  state_topic: /my/topic
  unit_of_measurement: °C
  value_template: '{{ value_json.8 }}'
- icon: mdi:alarm-light
  name: errors
  platform: mqtt
  state_topic: homeassistant/sensor/errors/state
  unit_of_measurement: errors
switch: []
